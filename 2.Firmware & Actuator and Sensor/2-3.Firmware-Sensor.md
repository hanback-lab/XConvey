# 펌웨어 : 센서의 이용

IOT 플랫폼에 연계된 공정에 장착된 센서나 기타 장치가 부착된 장비는 작업물의 이동, 구성, 작업형태등을 파악하여 실시간으로 수집하여 전송하며, 이렇게 수집된 데이터를 분석함으로써 생산 공정의 효율성을 극대화하고 생산량을 최적화할 수 있습니다.
본 키트에는 PIR Sensor가 5개, Inductive Sensor가 1개 부착되어 있어
다양한 기능을 수행할 수 있습니다.원재료의 투입여부, 작업물 통과 시간 조절, 작업시간 조절, 생산물 카운트 등의 기능을 튜닝할 수 있으며, 카메라 센서를 이용해서는 새로운 기능을 구현 할 수 있습니다.
PICO W MCU에서는 펌웨어 구현에 쉽게 접근 할 수 있는 기능을 제공합니다.


펌웨어란 "특수한 목적을 달성하기위한 하드웨어 장치를 제어하기 위한 소프트웨어"로 정의 할 수 있습니다.

본 키트의 PIR Sensor는 PICO W의 GPIO10, GPIO11, GPIO12, GPIO13, GPIO14번에 연결되어 있습니다. 또한 Inductive Sensor는 GPIO6 번에 할당되어 있습니다.
예를 들어 GPIO11을 PIR 두번째 센서의 핀을 설정하고 Interupt Handler가 호출되는 코드를 예로 들겠습니다.

```python
from machine import Pin, UART
import time

def callback_pir11(pin11):
    print("Hello, pir11")

pin11 = Pin(11, Pin.IN,Pin.PULL_UP)

pin11.irq(trigger=Pin.IRQ_RISING, handler=callback_pir11)

```

결과 확인 방법:
두번째 PIR (Stamping 장치의 아래부분)을 손이나 물체를 움직여본다.

```out

minicom -b 115200 -o -D /dev/ttyACM0
Welcome to minicom 2.8

OPTIONS: I18n
Port /dev/ttyACM0, 16:27:13

Press CTRL-A Z for help on special keys

Hello, pir11
Hello, pir11
Hello, pir11

```

PIR 사이의 거리을 재고 두 PIR 인터럽트의 시간차를 알면 컨베이어 속도를 알 수있습니다. 이를 이용해 공정을 재배치하며 시간 단축을 통해 생산성을 향상시키거나,
공정의 속도를 더디게 하여 품질을 확보하는 등(양품 분류 카운트 비율 증가)의 추가 작업을 수행 할 수 있습니다.

<details>
<summary>연습문제</summary>

## PIR Sensor간의 Interrupt 시간을 측정할 수 있는 프로그램을 작성하십시오. 
GPIO11 과 GPIO12 사이의 시간을 측정 할 수 있습니다.
